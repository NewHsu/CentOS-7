# Vim
## Vim介绍
* 编辑文本文件是系统管理员在Linux系统上执行的一项最为常见的任务。因此，有各式各样的文本编辑器可以选用，最有代表的应当是vi和emacs，本人常用vi，所以这里也就说说vi的应用。
* CnetOS7 中的vim代表vi的增强版，因此vim具有许多vi中没有的功能，但依然保持向后兼容性。在新的功能中包含了广受欢迎的选项，如语法突出显示，不全模式和拼写检查等。
- [Vim](#vim)
    - [Vim介绍](#vim%E4%BB%8B%E7%BB%8D)
    - [为什么要掌握vim？](#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8E%8C%E6%8F%A1vim%EF%BC%9F)
    - [Vim切换模式](#vim%E5%88%87%E6%8D%A2%E6%A8%A1%E5%BC%8F)
                - [Vim三种主要模式状态：](#vim%E4%B8%89%E7%A7%8D%E4%B8%BB%E8%A6%81%E6%A8%A1%E5%BC%8F%E7%8A%B6%E6%80%81%EF%BC%9A)
    - [Vim编辑器基础知识](#vim%E7%BC%96%E8%BE%91%E5%99%A8%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86)
                    - [打开文件：](#%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%EF%BC%9A)
                - [编辑文本](#%E7%BC%96%E8%BE%91%E6%96%87%E6%9C%AC)
                - [光标移动](#%E5%85%89%E6%A0%87%E7%A7%BB%E5%8A%A8)
                - [删除内容](#%E5%88%A0%E9%99%A4%E5%86%85%E5%AE%B9)
                - [复制黏贴](#%E5%A4%8D%E5%88%B6%E9%BB%8F%E8%B4%B4)
                - [保存退出](#%E4%BF%9D%E5%AD%98%E9%80%80%E5%87%BA)
                - [特殊指令](#%E7%89%B9%E6%AE%8A%E6%8C%87%E4%BB%A4)
                - [搜索替换](#%E6%90%9C%E7%B4%A2%E6%9B%BF%E6%8D%A2)
        - [总结](#%E6%80%BB%E7%BB%93)

## 为什么要掌握vim？
* 每个系统管理员对于编辑器都有不同的偏爱，一些人会选择gedit，有些人会选择nano，甚至还有人选用emacs，既然已经有可选的编辑器了，那么也要熟悉下vim和vi的基本知识，原因很简单，随系统安装，适用广泛，shell下必备编辑器。

## Vim切换模式
* Vim并不是容易学习的编辑器，其部分原因是vim中的所有命令都以速度和效率为目标而设计的，不容易记忆，另一部分原因在于vim是模态编辑器，模态编辑器意味着特定命令和按键操作的功能取决于当前活动状态是什么模式。

##### Vim三种主要模式状态：
- 命令模式
    -   此模式用于文本导航，剪切和粘贴以及简单命令。撤销，恢复和其他操作也从此模式中执行
- 插入模式
    -   此模式用于常规文本编辑。替换模式是插入模式的一种变体，可以替换而不是插入文本。
- EX模式
    -   此模式用于保存，退出和打开文件，以及搜索，替换和其他更为复杂的操作。此模式中，可以将程序的输出插入到当前文件中，以及配置vim等等。使用ex可以实现的所有功能都可以从此模式执行。
![png](./images/vim/vim-1.png)
```
三种模式的转换：
        　　命令模式 下输入 a、i、o进入插入模式
        　　插入模式 下按ESC进入  命令模式
        　　命令模式 下输入 : （冒号）进入 EX模式
        　　EX模式 下指令错误则返回命令模式
```
## Vim编辑器基础知识
无论使用哪种编辑器，你都必须要掌握以下三个知识
	1：打开新建或现有文件
	2：更改或插入新文本
	3：保存文件退出编辑器
###### 打开文件：
* 在vim中打开文件的最简单做法是将其指定为命令行上一个参数。例如：打开/etc/hosts文件，可以执行以下命令：
    
    [shell]#vim /etc/hosts

> 如果你尝试打开的是一个并不存在的文件，但是却存在指定的目录，vim将通知您正在编辑一个[新文件]，并将在首次进行保存时创建该文件。
> 打开文件后，vim将在命令模式下启动，您将在屏幕左下角看到有关已打开文件信息（文件名、行数、字符数），并将在右下角看到当前光标位置（行，字符）以及正在显示文件那部分。
![png](./images/vim/vim-2.png)

##### 编辑文本
* 如果你打开文件之后需要进行编辑，那么需要切换到插入模式进行编辑，进入插入模式命令如下：
```
可以通过以下命令由“命令模式”进入“插入模式”
a------------在当标后附加文本
A------------在本行行末附加文本
i-------------在光标前插入文本
I-------------在本行开始插入文本
o------------在光标下插入新行
O-----------在光标上插入新行
ESC--------退出“插入模式”
每次处于插入或者替换模式时，标尺将会显示—INSTER—或—REPLACE--。
```
##### 光标移动
```
命令模式和插入模式下使用“上、下、左、右”键盘和 “h、j、k、l”键都是移动光标
例如（10j）光标将下移10行
```
```
特殊移动：（命令模式）
$ ------------移至行尾
0（零）  -----移至行首
H   ----------移至屏幕上端
M   ----------移至屏幕中央
L   ----------移至屏幕下端
gg   ---------到文件第一行
G   ----------到文件末尾
PageDn   －－－－－ 向下移动一页
PageUp  －－－－－ 向上移动一页
w －－－－－ 移动到下一个单词开头（5w将移动5个单词）
b －－－－－ 移动到上一个单词开头
（ －－－－－ 移动到当前或上一个句子开头
） －－－－－ 移动到下一个句子开头
{ －－－－－  移动到当前/上一段落开头
} －－－－－  移动到下一段落开头
```
```
EX模式：
：n ------------到第n行
```
##### 删除内容
```
命令模式：
dd  －－－－－删除整行 （多行删除Ndd，N表示数字）
S  －－－－－删除光标所在的列，并进入输入模式
d+方向键 －－－－－删除文字
d+w－－－－－删除单词
c －－－－－删除单行并进入插入模式
c$ －－－－－删除光标开始位置到行末尾
```
```
插入模式:
Back 退格键  －－－－－删除文字
```
##### 复制黏贴
```
命令模式
yy  －－－－－复制整行 （多行复制Nyy，N表示数字）
p  －－－－－黏贴整行 
5yaw －－－－－复制当前单词以及后面4个单词
```

##### 保存退出
```
EX模式
：q －－－－－结束Vi程序，如果文件有过修改，先保存文件
：q！ －－－－－强制退出Vi程序
：wq －－－－－保存修改并退出程序
：w －－－－－保存修改并留在编辑器中
：w <filename>－－－－－以其他文件名保存当前内容
```

##### 特殊指令
```
EX模式
：set nu －－－－－使文本每一行前出现行号
：set nonu ------取消每一行前的行号
```

##### 搜索替换
```
命令模式：
/README －－－－－搜索关键字README
/^README －－－－－搜索行开头是README的行
/README$ －－－－－搜索结尾是README的行
```
```
EX模式：
:%s/README/PLEASE_READ_ME/g  －－－－－全局将README替换成PLEASE_READ_ME
```
### 总结
* Vim添加配置文件，适应python，C，go，等等语言开发。
* 以上内容为vim的简单实用，其实vim的操作指令和使用方法比这个要复杂的太多了，这里的仅仅是介绍常用指令和功能，可以参考vimtutor来进行更深入的学习。

